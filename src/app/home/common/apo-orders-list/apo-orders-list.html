<div class="main-layout">
  <div class="search-container">
    <mat-form-field appearance="outline">
      <mat-icon matPrefix>search</mat-icon>
      <input matInput (keyup)="applyFilter($event)" placeholder="Search..">
    </mat-form-field>
  </div>

    <div class="table-container">
        <table mat-table [dataSource]="dataSource" matSort matSortActive="orderNo" matSortDisableClear
            matSortDirection="desc">
            <ng-container matColumnDef="#">
                <th mat-header-cell *matHeaderCellDef>#</th>
                <td mat-cell *matCellDef="let row; let i = index;">
                    {{ i + 1 }}
                </td>
            </ng-container>
            <ng-container matColumnDef="orderNo">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Request ID
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.orderNo}}</td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Name
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.person.empName}}</td>
            </ng-container>

            <ng-container matColumnDef="service">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Service
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.person.service}}</td>
            </ng-container>

            <ng-container matColumnDef="apoDt">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        APO Date
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">
                    {{this.datePipe.transform(row.apoDt, this.constants.dtFormat)}}</td>
            </ng-container>

            <ng-container matColumnDef="posOrderDt">
                <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
                    <span class="header-content">
                        Posting Date
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{this.datePipe.transform(row.posOrderDt,
                    this.constants.dtFormat)}}</td>
            </ng-container>

            <ng-container matColumnDef="joiningDt">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Joining Date
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{this.datePipe.transform(row.joiningDt,
                    this.constants.dtFormat)}}</td>
            </ng-container>

            <ng-container matColumnDef="apoDurtn">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        APO Duration
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">{{row.apoDurtn}}</td>
            </ng-container>

            <!-- <ng-container matColumnDef="aging">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Aging                        
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">-</td>
            </ng-container> -->

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    <span class="header-content">
                        Status
                    </span>
                </th>
                <td mat-cell *matCellDef="let row">
                    <button mat-button class="status-button" (click)="goToAPO(row.orderNo, row.status.statusId)"
                        [ngClass]="getStatusClass(row.status.statusId)">
                        <img src="\assets\images\{{row.status.statusName|lowercase}}-icon.png">
                        {{ row.status.statusName | titlecase}}
                    </button>
                </td>
            </ng-container>

      <!-- Action -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let row">

          <!-- Edit / View -->
          <button mat-icon-button (click)="goToAPO(row.orderNo, row.status.statusId)" color="accent"
                  class="circle-button">
            <img *ngIf="row.status.statusId == enumStatus.DRAFT || row.status.statusId == enumStatus.PENDING"
                 src="\assets\images\edit-icon.png">
            <img *ngIf="row.status.statusId == enumStatus.SUBMITTED || row.status.statusId==enumStatus.RETURNED || row.status.statusId==enumStatus.REJECTED 
                        || row.status.statusId== enumStatus.APPROVED || row.status.statusId== enumStatus.CONSULT"
                 src="\assets\images\view-icon.png">
          </button>

          <!-- Delete -->
          <button mat-icon-button (click)="deleteOrder(row.orderNo)" color="warn"
                  class="circle-button">
            <img src="\assets\images\delete-red-icon.png">
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="mat-mdc-paginator-container">
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
    </mat-paginator>
  </div>
</div>